(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{375:function(t,e,i){},412:function(t,e,i){"use strict";i(375)},442:function(t,e,i){"use strict";i.r(e);i(177),i(346),i(178),i(11),i(320),i(350),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(360),i(361),i(362),i(363),i(364),i(365),i(366),i(367),i(368),i(369),i(370),i(371),i(372),i(373),i(374);var s="http://www.w3.org/2000/svg",r={props:{src:String,audioID:String,type:{default:"histogram",type:String},fftSize:{default:128,type:Number},displaySize:{default:56,type:Number}},data:function(){return{color:"#8e71c7",boxHeight:600,svgWidth:0,bars:[]}},mounted:function(){this.resizeSVG(),this.initVoiceBar(),this.getMusicByElement()},methods:{resizeSVG:function(){var t=this.$refs.voiceBox;this.svgWidth=parseInt(window.getComputedStyle(t.parentNode).width),t.setAttribute("width",this.svgWidth)},initAudioContext:function(){document.getElementById(this.audioID);var t=window.AudioContext||window.webkitAudioContext||window.mozAudioContext||window.msAudioContext;this.audioContext=new t,this.gainNode=this.audioContext.createGain(),this.analyser=this.audioContext.createAnalyser(),this.analyser.fftSize=this.fftSize;this.audioContext},initVoiceBar:function(){this.repeatBars();var t=document.createElementNS(s,"g");t.setAttribute("id","voice-bars-"+this.type),this.$refs.defs.appendChild(t);var e=20;if("circle"===this.type){var i=document.createElementNS(s,"circle"),r=this.svgWidth/2,n=this.boxHeight/2;e=150*Math.PI/this.displaySize*.8,i.setAttribute("cx",r),i.setAttribute("cy",n),i.setAttribute("r",150),i.setAttribute("stroke",this.color),i.setAttribute("fill","none"),this.$refs.voiceBox.appendChild(i);for(var o=0;o<this.displaySize;o++){var a=document.createElementNS(s,"rect");a.setAttribute("x",r),a.setAttribute("y",n-150),a.setAttribute("width",e),a.setAttribute("height",1),a.setAttribute("fill","url(#bar-grad)"),a.setAttribute("transform","rotate(".concat(o/this.displaySize*180,",").concat(r,",").concat(n,")")),t.appendChild(a),this.bars.push(a)}}else{e=this.svgWidth/(2*this.displaySize);for(var c=0;c<this.displaySize;c++){var d=document.createElementNS(s,"rect");d.setAttribute("x",this.svgWidth/2+e*c),d.setAttribute("y",this.boxHeight/2),d.setAttribute("width",e),d.setAttribute("height",1),d.setAttribute("fill","url(#bar-grad)"),t.appendChild(d),this.bars.push(d)}}},repeatBars:function(){var t=this.$refs.voiceBox,e=document.createElementNS(s,"use");e.setAttributeNS("http://www.w3.org/1999/xlink","href","#voice-bars-"+this.type),t.appendChild(e),(e=e.cloneNode()).setAttribute("transform","scale(-1, 1) translate(".concat(-this.svgWidth,", 0)")),t.appendChild(e),(e=e.cloneNode()).setAttribute("transform","rotate(180, ".concat(this.svgWidth/2,", ").concat(this.boxHeight/2,")")),t.appendChild(e),(e=e.cloneNode()).setAttribute("transform","scale(1, -1) translate(0, ".concat(-this.boxHeight,")")),t.appendChild(e)},connectSource:function(t){var e=this.audioContext,i=this.gainNode,s=this.analyser;t.connect(i),i.connect(s),s.connect(e.destination)},getMusicByElement:function(){var t,e=this,i=document.getElementById(this.audioID);i.addEventListener("play",(function(){e.audioContext||(e.initAudioContext(),t=e.audioContext.createMediaElementSource(i),e.connectSource(t)),e.frequencyBars()}))},getMusicByXHR:function(){var t,e=this,i=this.audioContext,s=new XMLHttpRequest;s.open("GET",this.src),s.responseType="arraybuffer",s.onload=function(){i.decodeAudioData(s.response,(function(s){(t=i.createBufferSource()).buffer=s,e.connectSource(t),e.frequencyBars()}),(function(t){console.log("Error with decoding audio data"+t.err)}))},s.send()},frequencyBars:function(){var t=this,e=this.analyser,i=this.bars,s=new Uint8Array(this.displaySize);window.requestAnimationFrame((function r(){e.getByteFrequencyData(s);for(var n=0;n<t.displaySize;n++){var o="circle"===t.type?s[n]/2:s[n]+1;i[n].setAttribute("height",o)}window.requestAnimationFrame(r)}))}}},n=(i(412),i(27)),o=Object(n.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("svg",{ref:"voiceBox",attrs:{height:this.boxHeight,fill:this.color}},[e("defs",{ref:"defs"},[e("linearGradient",{attrs:{id:"bar-grad",x1:"0.5",y1:"0",x2:"0.5",y2:"1"}},[e("stop",{attrs:{offset:"0","stop-color":this.color}}),this._v(" "),e("stop",{attrs:{offset:"1","stop-color":"rgba(142,113,199,0)"}})],1)],1)])])}),[],!1,null,null,null);e.default=o.exports}}]);